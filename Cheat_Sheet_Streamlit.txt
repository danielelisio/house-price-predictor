# STREAMLIT TESTING CHEAT SHEET
# House Price Predictor - MLOps Course
# =====================================

## CURRENT SETUP STATUS
Docker-Compose Service: streamlit (service name)
Image: mlspecialist99/streamlit:dev
Port Mapping: 0.0.0.0:8501->8501/tcp
Status: Up and running (docker-compose)
Note: Actual container name is auto-generated by docker-compose

## BROWSER ACCESS
Primary URL: http://127.0.0.1:8501 (Docker-Compose)


## DOCKER COMMANDS

### Docker-Compose Commands (CURRENT SETUP)
# Check all services (shows actual container names)
docker compose ps

# Get specific container name for Streamlit service
docker compose ps -q streamlit

# Check all containers (including non-compose ones)
docker ps

# View Streamlit logs (live)
docker compose logs -f streamlit

# View Streamlit logs (last 50 lines)
docker compose logs --tail 50 streamlit

# Execute commands inside Streamlit container
docker compose exec streamlit bash
docker compose exec streamlit ls -la /app
docker compose exec streamlit cat /app/app.py

# Stop/Start Streamlit service
docker compose stop streamlit
docker compose start streamlit
docker compose restart streamlit

# Stop all services
docker compose down

# Start all services
docker compose up -d

### Manual Container Creation (alternative)
docker run -p 8501:8501 mlspecialist99/streamlit:v1
docker run -d -p 8501:8501 --name my-streamlit mlspecialist99/streamlit:v1

## STREAMLIT APP TESTING

### 1. BASIC FUNCTIONALITY TEST
- Navigate to: http://127.0.0.1:8501
- Verify page loads without errors
- Check if all UI elements are visible
- Test sidebar controls (if any)

### 2. HOUSE PRICE PREDICTION TEST
Input Values to Test:
- Square Feet: 2000
- Bedrooms: 3
- Bathrooms: 2
- Age: 10
- Garage: 1

Expected Behavior:
- Form accepts all inputs
- Prediction button works
- Results display properly
- No error messages

### 3. EDGE CASES TEST
Minimum Values:
- Square Feet: 500
- Bedrooms: 1
- Bathrooms: 1
- Age: 0
- Garage: 0

Maximum Values:
- Square Feet: 5000
- Bedrooms: 10
- Bathrooms: 5
- Age: 100
- Garage: 3

Invalid Inputs:
- Negative numbers
- Very large numbers
- Text in numeric fields

### 4. API CONNECTIVITY TEST
The Streamlit app should connect to FastAPI at:
- Docker-Compose: http://fastapi:8000 (internal container communication)
- Host network: http://127.0.0.1:8000 (docker-compose FastAPI)
- Legacy: http://127.0.0.1:8080 (legacy FastAPI container)

Check for:
- Successful API calls
- Proper error handling if API is down
- Response time indicators

## TROUBLESHOOTING

### Container Won't Start
1. Check if port 8501 is already in use:
   netstat -an | findstr :8501
   
2. Check Docker daemon status:
   docker version

3. View docker-compose service logs:
   docker compose logs streamlit

4. Check all services status:
   docker compose ps

### Page Won't Load
1. Verify Streamlit service is running:
   docker compose ps
   
2. Check correct URL:
   http://127.0.0.1:8501 (not localhost or old port 32769)
   
3. Try different browser or incognito mode

4. Check Windows firewall/antivirus

5. Restart Streamlit service:
   docker compose restart streamlit

### API Connection Issues
1. Verify FastAPI service is running:
   docker compose ps
   
2. Test FastAPI directly:
   curl http://127.0.0.1:8000/health
   
3. Check network connectivity between services:
   docker compose exec streamlit ping fastapi

4. Check legacy FastAPI if needed:
   curl http://127.0.0.1:8080/health

### Performance Issues
1. Check service resources:
   docker compose exec streamlit top
   docker stats $(docker compose ps -q streamlit)
   
2. Monitor logs for errors:
   docker compose logs -f streamlit

3. Restart service if needed:
   docker compose restart streamlit

## DEVELOPMENT WORKFLOW

### Local Development (if editing app.py)
1. Stop current service:
   docker compose stop streamlit
   
2. Rebuild Streamlit image:
   docker compose build streamlit
   
3. Start updated service:
   docker compose up -d streamlit

### Alternative: Manual rebuild
1. Build new image:
   docker build -t mlspecialist99/streamlit:dev streamlit_app/
   
2. Restart services:
   docker compose up -d

### Testing New Features
1. Create test scenarios
2. Document expected vs actual behavior
3. Check browser console for JavaScript errors (F12)
4. Monitor Docker logs during testing

## QUICK REFERENCE URLS
Streamlit App (Current): http://127.0.0.1:8501
FastAPI Docs (Docker-Compose): http://127.0.0.1:8000/docs
FastAPI Health (Docker-Compose): http://127.0.0.1:8000/health
FastAPI Docs (Legacy): http://127.0.0.1:8080/docs
FastAPI Health (Legacy): http://127.0.0.1:8080/health

## SAMPLE TEST DATA
Test Case 1 (Typical House):
- Square Feet: 1800
- Bedrooms: 3
- Bathrooms: 2
- Age: 15
- Garage: 2

Test Case 2 (Luxury House):
- Square Feet: 3500
- Bedrooms: 5
- Bathrooms: 4
- Age: 5
- Garage: 3

Test Case 3 (Starter Home):
- Square Feet: 1200
- Bedrooms: 2
- Bathrooms: 1
- Age: 25
- Garage: 1